@using HomeManager.Data.Data.ViewModels
@model ConversationDetailsViewModel


<h2>Chat with @Model.OtherParticipantName</h2>

<div id="messagesList" style="border: 1px solid #ccc; padding: 10px; max-height: 400px; overflow-y: auto;">
    @foreach (var message in Model.Messages)
    {
        <div class="message-item @(message.SenderId == Model.CurrentUserId ? "self" : "other")">
            <strong>@(message.SenderId == Model.CurrentUserId ? "You" : @Model.OtherParticipantName):</strong>
            @message.Content
            <br /><small>@message.SentAt.ToString("g")</small>
        </div>
    }
</div>

<div>
    <input type="text" id="messageInput" placeholder="Type your message here..." />
    <button onclick="sendMessage()" class="btn btn-hm">Send</button>
</div>

<input type="hidden" id="conversationId" value="@Model.ConversationId" />
<input type="hidden" id="senderId" value="@Model.CurrentUserId" />

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.0/signalr.min.js"></script>
    
}


