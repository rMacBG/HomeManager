@using HomeManager.Data.Data.Dtos
@{
    ViewData["Title"] = "Home Page";
}
@model List<HomeDto>

<div class="hero-section py-5 text-center bg-light">
    <h1 class="display-3 fw-bold mb-3">Find Your Dream Home</h1>
    <p class="lead mb-4">Browse, search, and connect with landlords. Your next home is just a click away!</p>
    <a href="@Url.Action("AdvancedSearchList", "Search")" class="btn btn-primary btn-lg shadow">Start Searching</a>
</div>

@if (Model != null && Model.Count > 0)
{
    <div class="container my-5">
        <h2 class="mb-4 text-center">Featured Properties</h2>
        <div id="estateCarousel" class="carousel slide carousel-fade">
            <div class="carousel-inner">
                @for (int i = 0; i < Model.Count; i++)
                {
                    var estate = Model[i];
                    var imagePath = (estate.Images != null && estate.Images.Any())
                        ? estate.Images.First().FilePath
                        : "/images/placeholder.png";
                    <div class="carousel-item @(i == 0 ? "active" : "")" data-aos="fade-up">
                        <a href="@Url.Action("Details", "Homes", new { id = estate.Id })">
                            <img src="@imagePath" class="d-block w-100 estate-img rounded" alt="@estate.HomeName" style="max-height:350px;object-fit:cover;" />
                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-75 rounded-3 p-3">
                                <h5 class="fw-bold">@estate.HomeName</h5>
                                <p class="mb-1">@estate.HomeLocation</p>
                                <p class="mb-0 text-warning fw-semibold">@estate.HomePrice.ToString("C")</p>
                            </div>
                        </a>
                    </div>
                }
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#estateCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#estateCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
            <div class="carousel-indicators">
                @for (int i = 0; i < Model.Count; i++)
                {
                    <button type="button" data-bs-target="#estateCarousel" data-bs-slide-to="@i" class="@(i == 0 ? "active" : "")" aria-current="@(i == 0 ? "true" : "false")" aria-label="Slide @(i + 1)"></button>
                }
            </div>
        </div>
    </div>
}
@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var estateCarousel = document.getElementById('estateCarousel');
            if (estateCarousel && typeof bootstrap !== "undefined" && bootstrap.Carousel) {
                new bootstrap.Carousel(estateCarousel, {
                    interval: 5000,
                    ride: 'carousel'
                });
            }
        });

        AOS.init();
    </script>
}

